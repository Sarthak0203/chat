{"ast":null,"code":"var _jsxFileName = \"/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/UserContextProvider.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext();\nconst usePersistedState = (key, defaultValue) => {\n  _s();\n  const [state, setState] = useState(() => JSON.parse(localStorage.getItem(key)) || defaultValue);\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [key, state]);\n  return [state, setState];\n};\n_s(usePersistedState, \"Fo3Z462ywcDrSeM/9qGnnueoYe8=\");\nexport const UserContextProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = usePersistedState('user', null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (!loading) {\n      const token = localStorage.getItem('token');\n      if (token) {\n        try {\n          fetch('http://localhost:9000/name', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n              email: user.email\n            })\n          }).then(response => response.json()).then(data => {\n            console.log(data.email);\n            if (data.firstName) {\n              setUser({\n                firstName: data.firstName,\n                email: data.email\n              });\n            }\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      }\n    }\n  }, [loading]);\n  useEffect(() => {\n    setLoading(false);\n  }, []);\n  const contextValue = {\n    user,\n    setUser\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserContextProvider, \"Dc7IUGd8kuE5eVRbyKE1Kd2t4co=\", false, function () {\n  return [usePersistedState];\n});\n_c = UserContextProvider;\nvar _c;\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","jsxDEV","_jsxDEV","UserContext","usePersistedState","key","defaultValue","_s","state","setState","JSON","parse","localStorage","getItem","setItem","stringify","UserContextProvider","children","_s2","user","setUser","loading","setLoading","token","fetch","method","headers","body","email","then","response","json","data","console","log","firstName","err","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/UserContextProvider.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\n\nexport const UserContext = createContext();\n\nconst usePersistedState = (key, defaultValue) => {\n  const [state, setState] = useState(\n    () => JSON.parse(localStorage.getItem(key)) || defaultValue\n  );\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [key, state]);\n\n  return [state, setState];\n};\n\nexport const UserContextProvider = ({ children }) => {\n  const [user, setUser] = usePersistedState('user', null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!loading) {\n      const token = localStorage.getItem('token');\n      if (token) {\n        try{\n        fetch('http://localhost:9000/name', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({ email: user.email }),\n        })\n        .then(response => response.json())\n        .then(data => {\n          console.log(data.email);\n          if (data.firstName) {\n            setUser({ firstName: data.firstName, email: data.email });\n          }\n        });\n      }\n      catch(err){\n        console.log(err)\n      }\n      }\n    }\n  }, [loading]);\n\n  useEffect(() => {\n    setLoading(false);\n  }, []);\n\n  const contextValue = {\n    user,\n    setUser,\n  };\n\n  return (\n    <UserContext.Provider value={contextValue}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAE1C,MAAMM,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,YAAY,KAAK;EAAAC,EAAA;EAC/C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAChC,MAAMU,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACR,GAAG,CAAC,CAAC,IAAIC,YACjD,CAAC;EAEDP,SAAS,CAAC,MAAM;IACda,YAAY,CAACE,OAAO,CAACT,GAAG,EAAEK,IAAI,CAACK,SAAS,CAACP,KAAK,CAAC,CAAC;EAClD,CAAC,EAAE,CAACH,GAAG,EAAEG,KAAK,CAAC,CAAC;EAEhB,OAAO,CAACA,KAAK,EAAEC,QAAQ,CAAC;AAC1B,CAAC;AAACF,EAAA,CAVIH,iBAAiB;AAYvB,OAAO,MAAMY,mBAAmB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EACnD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGhB,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC;EACvD,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACd,IAAI,CAACsB,OAAO,EAAE;MACZ,MAAME,KAAK,GAAGX,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAIU,KAAK,EAAE;QACT,IAAG;UACHC,KAAK,CAAC,4BAA4B,EAAE;YAClCC,MAAM,EAAE,MAAM;YACdC,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClC,eAAe,EAAG,UAASH,KAAM;YACnC,CAAC;YACDI,IAAI,EAAEjB,IAAI,CAACK,SAAS,CAAC;cAAEa,KAAK,EAAET,IAAI,CAACS;YAAM,CAAC;UAC5C,CAAC,CAAC,CACDC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;YACZC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACJ,KAAK,CAAC;YACvB,IAAII,IAAI,CAACG,SAAS,EAAE;cAClBf,OAAO,CAAC;gBAAEe,SAAS,EAAEH,IAAI,CAACG,SAAS;gBAAEP,KAAK,EAAEI,IAAI,CAACJ;cAAM,CAAC,CAAC;YAC3D;UACF,CAAC,CAAC;QACJ,CAAC,CACD,OAAMQ,GAAG,EAAC;UACRH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC;QAClB;MACA;IACF;EACF,CAAC,EAAE,CAACf,OAAO,CAAC,CAAC;EAEbtB,SAAS,CAAC,MAAM;IACduB,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMe,YAAY,GAAG;IACnBlB,IAAI;IACJC;EACF,CAAC;EAED,oBACElB,OAAA,CAACC,WAAW,CAACmC,QAAQ;IAACC,KAAK,EAAEF,YAAa;IAAApB,QAAA,EACvCA;EAAQ;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACzB,GAAA,CA9CWF,mBAAmB;EAAA,QACNZ,iBAAiB;AAAA;AAAAwC,EAAA,GAD9B5B,mBAAmB;AAAA,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
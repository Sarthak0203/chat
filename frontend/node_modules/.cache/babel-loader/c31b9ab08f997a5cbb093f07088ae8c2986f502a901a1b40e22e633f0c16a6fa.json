{"ast":null,"code":"var _jsxFileName = \"/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/Pages/VideoCall/VideoCall.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useContext } from \"react\";\nimport { FiVideo, FiVideoOff, FiMic, FiMicOff } from \"react-icons/fi\";\nimport './style.css';\nimport { UserContext } from '../../UserContextProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst configuration = {\n  iceServers: [{\n    urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"]\n  }],\n  iceCandidatePoolSize: 10\n};\nconst socket = io(\"http://localhost:7500\", {\n  transports: [\"websocket\"]\n});\nlet pc;\nlet localStream;\nlet startButton;\nlet hangupButton;\nlet muteAudButton;\nlet remoteVideo;\nlet localVideo;\n\n// Your socket event handlers...\n\nfunction App() {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  startButton = useRef(null);\n  hangupButton = useRef(null);\n  muteAudButton = useRef(null);\n  localVideo = useRef(null);\n  remoteVideo = useRef(null);\n  useEffect(() => {\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }, []);\n  const [audiostate, setAudio] = useState(false);\n  const startB = async () => {\n    try {\n      localStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: {\n          echoCancellation: true\n        }\n      });\n      localVideo.current.srcObject = localStream;\n    } catch (err) {\n      console.log(err);\n    }\n    startButton.current.disabled = true;\n    hangupButton.current.disabled = false;\n    muteAudButton.current.disabled = false;\n    socket.emit(\"message\", {\n      type: \"ready\"\n    });\n  };\n  const hangB = async () => {\n    hangup();\n    socket.emit(\"message\", {\n      type: \"bye\"\n    });\n  };\n  function muteAudio() {\n    if (audiostate) {\n      localVideo.current.muted = true;\n      setAudio(false);\n    } else {\n      localVideo.current.muted = false;\n      setAudio(true);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-item-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: localVideo,\n            className: \"video-item\",\n            autoPlay: true,\n            playsInline: true,\n            src: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-label\",\n            children: \"Me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-item-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: remoteVideo,\n            className: \"video-item\",\n            autoPlay: true,\n            playsInline: true,\n            src: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-label\",\n            children: user && user.firstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\",\n          ref: startButton,\n          onClick: startB,\n          children: /*#__PURE__*/_jsxDEV(FiVideo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-end\",\n          ref: hangupButton,\n          onClick: hangB,\n          children: /*#__PURE__*/_jsxDEV(FiVideoOff, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\",\n          ref: muteAudButton,\n          onClick: muteAudio,\n          children: audiostate ? /*#__PURE__*/_jsxDEV(FiMic, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FiMicOff, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(App, \"snBHCAfsVl0F24T6XAfcUjEFybA=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useContext","FiVideo","FiVideoOff","FiMic","FiMicOff","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","configuration","iceServers","urls","iceCandidatePoolSize","socket","io","transports","pc","localStream","startButton","hangupButton","muteAudButton","remoteVideo","localVideo","App","_s","user","current","disabled","audiostate","setAudio","startB","navigator","mediaDevices","getUserMedia","video","audio","echoCancellation","srcObject","err","console","log","emit","type","hangB","hangup","muteAudio","muted","children","className","ref","autoPlay","playsInline","src","fileName","_jsxFileName","lineNumber","columnNumber","firstName","onClick","_c","$RefreshReg$"],"sources":["/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/Pages/VideoCall/VideoCall.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport { FiVideo, FiVideoOff, FiMic, FiMicOff } from \"react-icons/fi\";\nimport './style.css';\nimport { UserContext } from '../../UserContextProvider';\n\nconst configuration = {\n  iceServers: [\n    {\n      urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"],\n    },\n  ],\n  iceCandidatePoolSize: 10,\n};\n\nconst socket = io(\"http://localhost:7500\", { transports: [\"websocket\"] });\n\nlet pc;\nlet localStream;\nlet startButton;\nlet hangupButton;\nlet muteAudButton;\nlet remoteVideo;\nlet localVideo;\n\n// Your socket event handlers...\n\nfunction App() {\n  const { user } = useContext(UserContext);\n  startButton = useRef(null);\n  hangupButton = useRef(null);\n  muteAudButton = useRef(null);\n  localVideo = useRef(null);\n  remoteVideo = useRef(null);\n\n  useEffect(() => {\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }, []);\n\n  const [audiostate, setAudio] = useState(false);\n\n  const startB = async () => {\n    try {\n      localStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: { echoCancellation: true },\n      });\n      localVideo.current.srcObject = localStream;\n    } catch (err) {\n      console.log(err);\n    }\n\n    startButton.current.disabled = true;\n    hangupButton.current.disabled = false;\n    muteAudButton.current.disabled = false;\n\n    socket.emit(\"message\", { type: \"ready\" });\n  };\n\n  const hangB = async () => {\n    hangup();\n    socket.emit(\"message\", { type: \"bye\" });\n  };\n\n  function muteAudio() {\n    if (audiostate) {\n      localVideo.current.muted = true;\n      setAudio(false);\n    } else {\n      localVideo.current.muted = false;\n      setAudio(true);\n    }\n  }\n\n  return (\n    <>\n      <main className=\"container1\">\n        <div className=\"video-container\">\n          <div className=\"video-item-wrapper\">\n            <video\n              ref={localVideo}\n              className=\"video-item\"\n              autoPlay\n              playsInline\n              src=\" \"\n            ></video>\n            <div className=\"video-label\">Me</div>\n          </div>\n          <div className=\"video-item-wrapper\">\n            <video\n              ref={remoteVideo}\n              className=\"video-item\"\n              autoPlay\n              playsInline\n              src=\" \"\n            ></video>\n            <div className=\"video-label\">{user && user.firstName}</div>\n          </div>\n        </div>\n  \n        <div className=\"btn-container\">\n          <button\n            className=\"btn-item btn-start\"\n            ref={startButton}\n            onClick={startB}\n          >\n            <FiVideo />\n          </button>\n          <button\n            className=\"btn-item btn-end\"\n            ref={hangupButton}\n            onClick={hangB}\n          >\n            <FiVideoOff />\n          </button>\n          <button\n            className=\"btn-item btn-start\"\n            ref={muteAudButton}\n            onClick={muteAudio}\n          >\n            {audiostate ? <FiMic /> : <FiMicOff />}\n          </button>\n        </div>\n      </main>\n    </>\n  );  \n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/Pages/VideoCall/VideoCall.jsx\",\n  _s = $RefreshSig$();\nimport { io } from \"socket.io-client\";\nimport { useRef, useEffect, useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UserContext } from \"../../UserContextProvider\";\nimport { FiVideo, FiVideoOff, FiMic, FiMicOff } from \"react-icons/fi\";\nimport \"./style.css\";\nimport logo from \"../../assets/logo.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst configuration = {\n  iceServers: [{\n    urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"]\n  }],\n  iceCandidatePoolSize: 10\n};\nlet pc;\nlet localStream;\nlet startButton;\nlet hangupButton;\nlet muteAudButton;\nlet remoteVideo;\nlet localVideo;\nfunction App({\n  setIsAuthenticated\n}) {\n  _s();\n  startButton = useRef(null);\n  hangupButton = useRef(null);\n  muteAudButton = useRef(null);\n  localVideo = useRef(null);\n  remoteVideo = useRef(null);\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const navigate = useNavigate();\n  const socket = useRef();\n  async function makeCall() {\n    try {\n      pc = new RTCPeerConnection(configuration);\n      pc.onicecandidate = e => {\n        const message = {\n          type: \"candidate\",\n          candidate: null\n        };\n        if (e.candidate) {\n          message.candidate = e.candidate.candidate;\n          message.sdpMid = e.candidate.sdpMid;\n          message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n        }\n        socket.current.emit(\"message\", message);\n      };\n      pc.ontrack = e => remoteVideo.current.srcObject = e.streams[0];\n      localStream.getTracks().forEach(track => pc.addTrack(track, localStream));\n      const offer = await pc.createOffer();\n      socket.current.emit(\"message\", {\n        type: \"offer\",\n        sdp: offer.sdp\n      });\n      await pc.setLocalDescription(offer);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  async function handleOffer(offer) {\n    if (pc) {\n      console.error(\"existing peerconnection\");\n      return;\n    }\n    try {\n      pc = new RTCPeerConnection(configuration);\n      pc.onicecandidate = e => {\n        const message = {\n          type: \"candidate\",\n          candidate: null\n        };\n        if (e.candidate) {\n          message.candidate = e.candidate.candidate;\n          message.sdpMid = e.candidate.sdpMid;\n          message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n        }\n        socket.current.emit(\"message\", message);\n      };\n      pc.ontrack = e => remoteVideo.current.srcObject = e.streams[0];\n      localStream.getTracks().forEach(track => pc.addTrack(track, localStream));\n      await pc.setRemoteDescription(offer);\n      const answer = await pc.createAnswer();\n      socket.current.emit(\"message\", {\n        type: \"answer\",\n        sdp: answer.sdp\n      });\n      await pc.setLocalDescription(answer);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  async function handleAnswer(answer) {\n    if (!pc) {\n      console.error(\"no peerconnection\");\n      return;\n    }\n    try {\n      await pc.setRemoteDescription(answer);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  async function handleCandidate(candidate) {\n    try {\n      if (!pc) {\n        console.error(\"no peerconnection\");\n        return;\n      }\n      if (!candidate) {\n        await pc.addIceCandidate(null);\n      } else {\n        await pc.addIceCandidate(candidate);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  async function hangup() {\n    if (pc) {\n      pc.close();\n      pc = null;\n    }\n    localStream.getTracks().forEach(track => track.stop());\n    localStream = null;\n    startButton.current.disabled = false;\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }\n  useEffect(() => {\n    socket.current = io(\"http://localhost:7500\", {\n      transports: [\"websocket\"]\n    });\n    socket.current.on(\"message\", e => {\n      if (!localStream) {\n        console.log(\"not ready yet\");\n        return;\n      }\n      switch (e.type) {\n        case \"offer\":\n          handleOffer(e);\n          break;\n        case \"answer\":\n          handleAnswer(e);\n          break;\n        case \"candidate\":\n          handleCandidate(e);\n          break;\n        case \"ready\":\n          // A second tab joined. This tab will initiate a call unless in a call already.\n          if (pc) {\n            console.log(\"already in call, ignoring\");\n            return;\n          }\n          makeCall();\n          break;\n        case \"bye\":\n          if (pc) {\n            hangup();\n          }\n          break;\n        default:\n          console.log(\"unhandled\", e);\n          break;\n      }\n    });\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }, []);\n  const [audiostate, setAudio] = useState(false);\n  const startB = async () => {\n    try {\n      localStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: {\n          echoCancellation: true\n        }\n      });\n      localVideo.current.srcObject = localStream;\n    } catch (err) {\n      console.log(err);\n    }\n    startButton.current.disabled = true;\n    hangupButton.current.disabled = false;\n    muteAudButton.current.disabled = false;\n    socket.current.emit(\"message\", {\n      type: \"ready\"\n    });\n  };\n  const hangB = async () => {\n    hangup();\n    socket.current.emit(\"message\", {\n      type: \"bye\"\n    });\n  };\n  function muteAudio() {\n    if (audiostate) {\n      localVideo.current.muted = true;\n      setAudio(false);\n    } else {\n      localVideo.current.muted = false;\n      setAudio(true);\n    }\n  }\n  const handleLogout = () => {\n    socket.current.emit(\"logout\", {\n      firstName: user.firstName\n    }, () => {\n      localStorage.removeItem(\"token\");\n      setIsAuthenticated(false);\n      navigate(\"/login\");\n      setUser(null);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapperAnon\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          class: \"logo\",\n          src: logo,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          id: \"h2\",\n          children: \"Anonymous Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btnWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"logoutBtn\",\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-item-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: localVideo,\n            className: \"video-item\",\n            autoPlay: true,\n            playsInline: true,\n            src: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-item-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: remoteVideo,\n            className: \"video-item\",\n            autoPlay: true,\n            playsInline: true,\n            src: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\",\n          ref: startButton,\n          onClick: startB,\n          children: /*#__PURE__*/_jsxDEV(FiVideo, {\n            size: 25\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-end\",\n          ref: hangupButton,\n          onClick: hangB,\n          children: /*#__PURE__*/_jsxDEV(FiVideoOff, {\n            size: 25\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\",\n          ref: muteAudButton,\n          onClick: muteAudio,\n          children: audiostate ? /*#__PURE__*/_jsxDEV(FiMic, {\n            size: 25\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FiMicOff, {\n            size: 25\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"x9fRiMEfJwJxCazxoSWmy0V1+ko=\", false, function () {\n  return [useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["io","useRef","useEffect","useState","useContext","useNavigate","UserContext","FiVideo","FiVideoOff","FiMic","FiMicOff","logo","jsxDEV","_jsxDEV","Fragment","_Fragment","configuration","iceServers","urls","iceCandidatePoolSize","pc","localStream","startButton","hangupButton","muteAudButton","remoteVideo","localVideo","App","setIsAuthenticated","_s","user","setUser","navigate","socket","makeCall","RTCPeerConnection","onicecandidate","e","message","type","candidate","sdpMid","sdpMLineIndex","current","emit","ontrack","srcObject","streams","getTracks","forEach","track","addTrack","offer","createOffer","sdp","setLocalDescription","console","log","handleOffer","error","setRemoteDescription","answer","createAnswer","handleAnswer","handleCandidate","addIceCandidate","hangup","close","stop","disabled","transports","on","audiostate","setAudio","startB","navigator","mediaDevices","getUserMedia","video","audio","echoCancellation","err","hangB","muteAudio","muted","handleLogout","firstName","localStorage","removeItem","children","className","class","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","id","onClick","ref","autoPlay","playsInline","size","_c","$RefreshReg$"],"sources":["/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/Pages/VideoCall/VideoCall.jsx"],"sourcesContent":["import { io } from \"socket.io-client\";\nimport { useRef, useEffect, useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UserContext } from \"../../UserContextProvider\";\n\nimport { FiVideo, FiVideoOff, FiMic, FiMicOff } from \"react-icons/fi\";\nimport \"./style.css\";\nimport logo from \"../../assets/logo.png\";\n\nconst configuration = {\n  iceServers: [\n    {\n      urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"],\n    },\n  ],\n  iceCandidatePoolSize: 10,\n};\n\nlet pc;\nlet localStream;\nlet startButton;\nlet hangupButton;\nlet muteAudButton;\nlet remoteVideo;\nlet localVideo;\n\nfunction App({ setIsAuthenticated }) {\n  startButton = useRef(null);\n  hangupButton = useRef(null);\n  muteAudButton = useRef(null);\n  localVideo = useRef(null);\n  remoteVideo = useRef(null);\n  const { user, setUser } = useContext(UserContext);\n  const navigate = useNavigate();\n  const socket = useRef();\n\n\n\n  \n  async function makeCall() {\n    try {\n      pc = new RTCPeerConnection(configuration);\n      pc.onicecandidate = (e) => {\n        const message = {\n          type: \"candidate\",\n          candidate: null,\n        };\n        if (e.candidate) {\n          message.candidate = e.candidate.candidate;\n          message.sdpMid = e.candidate.sdpMid;\n          message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n        }\n        socket.current.emit(\"message\", message);\n      };\n      pc.ontrack = (e) => (remoteVideo.current.srcObject = e.streams[0]);\n      localStream.getTracks().forEach((track) => pc.addTrack(track, localStream));\n      const offer = await pc.createOffer();\n      socket.current.emit(\"message\", { type: \"offer\", sdp: offer.sdp });\n      await pc.setLocalDescription(offer);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function handleOffer(offer) {\n    if (pc) {\n      console.error(\"existing peerconnection\");\n      return;\n    }\n    try {\n      pc = new RTCPeerConnection(configuration);\n      pc.onicecandidate = (e) => {\n        const message = {\n          type: \"candidate\",\n          candidate: null,\n        };\n        if (e.candidate) {\n          message.candidate = e.candidate.candidate;\n          message.sdpMid = e.candidate.sdpMid;\n          message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n        }\n        socket.current.emit(\"message\", message);\n      };\n      pc.ontrack = (e) => (remoteVideo.current.srcObject = e.streams[0]);\n      localStream.getTracks().forEach((track) => pc.addTrack(track, localStream));\n      await pc.setRemoteDescription(offer);\n\n      const answer = await pc.createAnswer();\n      socket.current.emit(\"message\", { type: \"answer\", sdp: answer.sdp });\n      await pc.setLocalDescription(answer);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function handleAnswer(answer) {\n    if (!pc) {\n      console.error(\"no peerconnection\");\n      return;\n    }\n    try {\n      await pc.setRemoteDescription(answer);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function handleCandidate(candidate) {\n    try {\n      if (!pc) {\n        console.error(\"no peerconnection\");\n        return;\n      }\n      if (!candidate) {\n        await pc.addIceCandidate(null);\n      } else {\n        await pc.addIceCandidate(candidate);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function hangup() {\n    if (pc) {\n      pc.close();\n      pc = null;\n    }\n    localStream.getTracks().forEach((track) => track.stop());\n    localStream = null;\n    startButton.current.disabled = false;\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }\n\n\n\n\n\n  useEffect(() => {\n    socket.current = io(\"http://localhost:7500\", { transports: [\"websocket\"] });\n\n    socket.current.on(\"message\", (e) => {\n      if (!localStream) {\n        console.log(\"not ready yet\");\n        return;\n      }\n      switch (e.type) {\n        case \"offer\":\n          handleOffer(e);\n          break;\n        case \"answer\":\n          handleAnswer(e);\n          break;\n        case \"candidate\":\n          handleCandidate(e);\n          break;\n        case \"ready\":\n          // A second tab joined. This tab will initiate a call unless in a call already.\n          if (pc) {\n            console.log(\"already in call, ignoring\");\n            return;\n          }\n          makeCall();\n          break;\n        case \"bye\":\n          if (pc) {\n            hangup();\n          }\n          break;\n        default:\n          console.log(\"unhandled\", e);\n          break;\n      }\n    });\n\n    \n\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }, []);\n\n  const [audiostate, setAudio] = useState(false);\n\n  const startB = async () => {\n    try {\n      localStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: { echoCancellation: true },\n      });\n      localVideo.current.srcObject = localStream;\n    } catch (err) {\n      console.log(err);\n    }\n\n    startButton.current.disabled = true;\n    hangupButton.current.disabled = false;\n    muteAudButton.current.disabled = false;\n\n    socket.current.emit(\"message\", { type: \"ready\" });\n  };\n\n  const hangB = async () => {\n    hangup();\n    socket.current.emit(\"message\", { type: \"bye\" });\n  };\n\n  function muteAudio() {\n    if (audiostate) {\n      localVideo.current.muted = true;\n      setAudio(false);\n    } else {\n      localVideo.current.muted = false;\n      setAudio(true);\n    }\n  }\n\n  const handleLogout = () => {\n    socket.current.emit(\"logout\", { firstName: user.firstName }, () => {\n      localStorage.removeItem(\"token\");\n      setIsAuthenticated(false);\n      navigate(\"/login\");\n      setUser(null);\n    });\n  };\n\n  return (\n    <>\n      <nav>\n        <div className=\"wrapperAnon\">\n          <img class=\"logo\" src={logo} alt=\"\" />\n          <h2 id=\"h2\">Anonymous Chat</h2>\n        </div>\n        <div className=\"btnWrapper\">\n          <button className=\"logoutBtn\" onClick={handleLogout}>\n            Logout\n          </button>\n        </div>\n      </nav>\n      <main className=\"container1\">\n        <div className=\"video-container\">\n          <div className=\"video-item-wrapper\">\n            <video\n              ref={localVideo}\n              className=\"video-item\"\n              autoPlay\n              playsInline\n              src=\" \"\n            ></video>\n            {/* <div className=\"video-label\">Me</div> */}\n          </div>\n          <div className=\"video-item-wrapper\">\n            <video\n              ref={remoteVideo}\n              className=\"video-item\"\n              autoPlay\n              playsInline\n              src=\" \"\n            ></video>\n            {/* <div className=\"video-label\">{user.firstName}</div> */}\n          </div>\n        </div>\n\n        <div className=\"btn-container\">\n          <button\n            className=\"btn-item btn-start\"\n            ref={startButton}\n            onClick={startB}\n          >\n            <FiVideo size={25} />\n          </button>\n          <button\n            className=\"btn-item btn-end\"\n            ref={hangupButton}\n            onClick={hangB}\n          >\n            <FiVideoOff size={25} />\n          </button>\n          <button\n            className=\"btn-item btn-start\"\n            ref={muteAudButton}\n            onClick={muteAudio}\n          >\n            {audiostate ? <FiMic size={25} /> : <FiMicOff size={25} />}\n          </button>\n        </div>\n      </main>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
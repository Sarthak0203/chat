{"ast":null,"code":"var _jsxFileName = \"/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/Pages/VideoCall/VideoCall.jsx\",\n  _s = $RefreshSig$();\nimport { io } from \"socket.io-client\";\nimport { useRef, useEffect, useState, useContext } from \"react\";\nimport { UserContext } from '../../UserContextProvider';\nimport { FiVideo, FiVideoOff, FiMic, FiMicOff } from \"react-icons/fi\";\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst configuration = {\n  iceServers: [{\n    urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"]\n  }],\n  iceCandidatePoolSize: 10\n};\nconst socket = io(\"http://localhost:7500\", {\n  transports: [\"websocket\"]\n});\nlet pc;\nlet localStream;\nlet startButton;\nlet hangupButton;\nlet muteAudButton;\nlet remoteVideo;\nlet localVideo;\nsocket.on(\"message\", e => {\n  if (!localStream) {\n    console.log(\"not ready yet\");\n    return;\n  }\n  switch (e.type) {\n    case \"offer\":\n      handleOffer(e);\n      break;\n    case \"answer\":\n      handleAnswer(e);\n      break;\n    case \"candidate\":\n      handleCandidate(e);\n      break;\n    case \"ready\":\n      // A second tab joined. This tab will initiate a call unless in a call already.\n      if (pc) {\n        console.log(\"already in call, ignoring\");\n        return;\n      }\n      makeCall();\n      break;\n    case \"bye\":\n      if (pc) {\n        hangup();\n      }\n      break;\n    default:\n      console.log(\"unhandled\", e);\n      break;\n  }\n});\nasync function makeCall() {\n  try {\n    pc = new RTCPeerConnection(configuration);\n    pc.onicecandidate = e => {\n      const message = {\n        type: \"candidate\",\n        candidate: null\n      };\n      if (e.candidate) {\n        message.candidate = e.candidate.candidate;\n        message.sdpMid = e.candidate.sdpMid;\n        message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n      }\n      socket.emit(\"message\", message);\n    };\n    pc.ontrack = e => remoteVideo.current.srcObject = e.streams[0];\n    localStream.getTracks().forEach(track => pc.addTrack(track, localStream));\n    const offer = await pc.createOffer();\n    socket.emit(\"message\", {\n      type: \"offer\",\n      sdp: offer.sdp\n    });\n    await pc.setLocalDescription(offer);\n  } catch (e) {\n    console.log(e);\n  }\n}\nasync function handleOffer(offer) {\n  if (pc) {\n    console.error(\"existing peerconnection\");\n    return;\n  }\n  try {\n    pc = new RTCPeerConnection(configuration);\n    pc.onicecandidate = e => {\n      const message = {\n        type: \"candidate\",\n        candidate: null\n      };\n      if (e.candidate) {\n        message.candidate = e.candidate.candidate;\n        message.sdpMid = e.candidate.sdpMid;\n        message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n      }\n      socket.emit(\"message\", message);\n    };\n    pc.ontrack = e => remoteVideo.current.srcObject = e.streams[0];\n    localStream.getTracks().forEach(track => pc.addTrack(track, localStream));\n    await pc.setRemoteDescription(offer);\n    const answer = await pc.createAnswer();\n    socket.emit(\"message\", {\n      type: \"answer\",\n      sdp: answer.sdp\n    });\n    await pc.setLocalDescription(answer);\n  } catch (e) {\n    console.log(e);\n  }\n}\nasync function handleAnswer(answer) {\n  if (!pc) {\n    console.error(\"no peerconnection\");\n    return;\n  }\n  try {\n    await pc.setRemoteDescription(answer);\n  } catch (e) {\n    console.log(e);\n  }\n}\nasync function handleCandidate(candidate) {\n  try {\n    if (!pc) {\n      console.error(\"no peerconnection\");\n      return;\n    }\n    if (!candidate) {\n      await pc.addIceCandidate(null);\n    } else {\n      await pc.addIceCandidate(candidate);\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\nasync function hangup() {\n  if (pc) {\n    pc.close();\n    pc = null;\n  }\n  localStream.getTracks().forEach(track => track.stop());\n  localStream = null;\n  startButton.current.disabled = false;\n  hangupButton.current.disabled = true;\n  muteAudButton.current.disabled = true;\n}\nfunction App() {\n  _s();\n  startButton = useRef(null);\n  hangupButton = useRef(null);\n  muteAudButton = useRef(null);\n  localVideo = useRef(null);\n  remoteVideo = useRef(null);\n  const {\n    user\n  } = useContext(UserContext);\n  useEffect(() => {\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }, []);\n  const [audiostate, setAudio] = useState(false);\n  const startB = async () => {\n    try {\n      localStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: {\n          echoCancellation: true\n        }\n      });\n      localVideo.current.srcObject = localStream;\n    } catch (err) {\n      console.log(err);\n    }\n    startButton.current.disabled = true;\n    hangupButton.current.disabled = false;\n    muteAudButton.current.disabled = false;\n    socket.emit(\"message\", {\n      type: \"ready\"\n    });\n  };\n  const hangB = async () => {\n    hangup();\n    socket.emit(\"message\", {\n      type: \"bye\"\n    });\n  };\n  function muteAudio() {\n    if (audiostate) {\n      localVideo.current.muted = true;\n      setAudio(false);\n    } else {\n      localVideo.current.muted = false;\n      setAudio(true);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-item-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: localVideo,\n            className: \"video-item\",\n            autoPlay: true,\n            playsInline: true,\n            src: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-item-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: remoteVideo,\n            className: \"video-item\",\n            autoPlay: true,\n            playsInline: true,\n            src: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\",\n          ref: startButton,\n          onClick: startB,\n          children: /*#__PURE__*/_jsxDEV(FiVideo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-end\",\n          ref: hangupButton,\n          onClick: hangB,\n          children: /*#__PURE__*/_jsxDEV(FiVideoOff, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-item btn-start\",\n          ref: muteAudButton,\n          onClick: muteAudio,\n          children: audiostate ? /*#__PURE__*/_jsxDEV(FiMic, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(FiMicOff, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(App, \"UqAT2h+fZyaAVStal6ycGBCfoCQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["io","useRef","useEffect","useState","useContext","UserContext","FiVideo","FiVideoOff","FiMic","FiMicOff","jsxDEV","_jsxDEV","Fragment","_Fragment","configuration","iceServers","urls","iceCandidatePoolSize","socket","transports","pc","localStream","startButton","hangupButton","muteAudButton","remoteVideo","localVideo","on","e","console","log","type","handleOffer","handleAnswer","handleCandidate","makeCall","hangup","RTCPeerConnection","onicecandidate","message","candidate","sdpMid","sdpMLineIndex","emit","ontrack","current","srcObject","streams","getTracks","forEach","track","addTrack","offer","createOffer","sdp","setLocalDescription","error","setRemoteDescription","answer","createAnswer","addIceCandidate","close","stop","disabled","App","_s","user","audiostate","setAudio","startB","navigator","mediaDevices","getUserMedia","video","audio","echoCancellation","err","hangB","muteAudio","muted","children","className","ref","autoPlay","playsInline","src","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/sarthakchaudhary/Documents/WebD/mern/chat/frontend/src/Pages/VideoCall/VideoCall.jsx"],"sourcesContent":["import { io } from \"socket.io-client\";\nimport { useRef, useEffect, useState,useContext } from \"react\";\nimport { UserContext } from '../../UserContextProvider';\n\nimport { FiVideo, FiVideoOff, FiMic, FiMicOff } from \"react-icons/fi\";\nimport './style.css';\n\nconst configuration = {\n  iceServers: [\n    {\n      urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"],\n    },\n  ],\n  iceCandidatePoolSize: 10,\n};\nconst socket = io(\"http://localhost:7500\", { transports: [\"websocket\"] });\n\nlet pc;\nlet localStream;\nlet startButton;\nlet hangupButton;\nlet muteAudButton;\nlet remoteVideo;\nlet localVideo;\nsocket.on(\"message\", (e) => {\n  if (!localStream) {\n    console.log(\"not ready yet\");\n    return;\n  }\n  switch (e.type) {\n    case \"offer\":\n      handleOffer(e);\n      break;\n    case \"answer\":\n      handleAnswer(e);\n      break;\n    case \"candidate\":\n      handleCandidate(e);\n      break;\n    case \"ready\":\n      // A second tab joined. This tab will initiate a call unless in a call already.\n      if (pc) {\n        console.log(\"already in call, ignoring\");\n        return;\n      }\n      makeCall();\n      break;\n    case \"bye\":\n      if (pc) {\n        hangup();\n      }\n      break;\n    default:\n      console.log(\"unhandled\", e);\n      break;\n  }\n});\n\nasync function makeCall() {\n  try {\n    pc = new RTCPeerConnection(configuration);\n    pc.onicecandidate = (e) => {\n      const message = {\n        type: \"candidate\",\n        candidate: null,\n      };\n      if (e.candidate) {\n        message.candidate = e.candidate.candidate;\n        message.sdpMid = e.candidate.sdpMid;\n        message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n      }\n      socket.emit(\"message\", message);\n    };\n    pc.ontrack = (e) => (remoteVideo.current.srcObject = e.streams[0]);\n    localStream.getTracks().forEach((track) => pc.addTrack(track, localStream));\n    const offer = await pc.createOffer();\n    socket.emit(\"message\", { type: \"offer\", sdp: offer.sdp });\n    await pc.setLocalDescription(offer);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nasync function handleOffer(offer) {\n  if (pc) {\n    console.error(\"existing peerconnection\");\n    return;\n  }\n  try {\n    pc = new RTCPeerConnection(configuration);\n    pc.onicecandidate = (e) => {\n      const message = {\n        type: \"candidate\",\n        candidate: null,\n      };\n      if (e.candidate) {\n        message.candidate = e.candidate.candidate;\n        message.sdpMid = e.candidate.sdpMid;\n        message.sdpMLineIndex = e.candidate.sdpMLineIndex;\n      }\n      socket.emit(\"message\", message);\n    };\n    pc.ontrack = (e) => (remoteVideo.current.srcObject = e.streams[0]);\n    localStream.getTracks().forEach((track) => pc.addTrack(track, localStream));\n    await pc.setRemoteDescription(offer);\n\n    const answer = await pc.createAnswer();\n    socket.emit(\"message\", { type: \"answer\", sdp: answer.sdp });\n    await pc.setLocalDescription(answer);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nasync function handleAnswer(answer) {\n  if (!pc) {\n    console.error(\"no peerconnection\");\n    return;\n  }\n  try {\n    await pc.setRemoteDescription(answer);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nasync function handleCandidate(candidate) {\n  try {\n    if (!pc) {\n      console.error(\"no peerconnection\");\n      return;\n    }\n    if (!candidate) {\n      await pc.addIceCandidate(null);\n    } else {\n      await pc.addIceCandidate(candidate);\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\nasync function hangup() {\n  if (pc) {\n    pc.close();\n    pc = null;\n  }\n  localStream.getTracks().forEach((track) => track.stop());\n  localStream = null;\n  startButton.current.disabled = false;\n  hangupButton.current.disabled = true;\n  muteAudButton.current.disabled = true;\n}\n\nfunction App() {\n  startButton = useRef(null);\n  hangupButton = useRef(null);\n  muteAudButton = useRef(null);\n  localVideo = useRef(null);\n  remoteVideo = useRef(null);\n  const { user } = useContext(UserContext);\n  useEffect(() => {\n    hangupButton.current.disabled = true;\n    muteAudButton.current.disabled = true;\n  }, []);\n  const [audiostate, setAudio] = useState(false);\n\n  const startB = async () => {\n    try {\n      localStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: { echoCancellation: true },\n      });\n      localVideo.current.srcObject = localStream;\n    } catch (err) {\n      console.log(err);\n    }\n\n    startButton.current.disabled = true;\n    hangupButton.current.disabled = false;\n    muteAudButton.current.disabled = false;\n\n    socket.emit(\"message\", { type: \"ready\" });\n  };\n\n  const hangB = async () => {\n    hangup();\n    socket.emit(\"message\", { type: \"bye\" });\n  };\n\n  function muteAudio() {\n    if (audiostate) {\n      localVideo.current.muted = true;\n      setAudio(false);\n    } else {\n      localVideo.current.muted = false;\n      setAudio(true);\n    }\n  }\n\n  return (\n    <>\n      <main className=\"container1\">\n        <div className=\"video-container\">\n          <div className=\"video-item-wrapper\">\n            <video\n              ref={localVideo}\n              className=\"video-item\"\n              autoPlay\n              playsInline\n              src=\" \"\n            ></video>\n            {/* <div className=\"video-label\">Me</div> */}\n          </div>\n          <div className=\"video-item-wrapper\">\n            <video\n              ref={remoteVideo}\n              className=\"video-item\"\n              autoPlay\n              playsInline\n              src=\" \"\n            ></video>\n            {/* <div className=\"video-label\">{user.firstName}</div> */}\n          </div>\n        </div>\n  \n        <div className=\"btn-container\">\n          <button className=\"btn-item btn-start\" ref={startButton} onClick={startB}>\n            <FiVideo />\n          </button>\n          <button className=\"btn-item btn-start\"></button>\n          <button className=\"btn-item btn-end\" ref={hangupButton} onClick={hangB} >\n            <FiVideoOff />\n          </button>\n          <button className=\"btn-item btn-start\" ref={muteAudButton} onClick={muteAudio}>\n            {audiostate ? <FiMic /> : <FiMicOff />}\n          </button>\n        </div>\n      </main>\n    </>\n  );  \n}\n\nexport default App"],"mappings":";;AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAACC,UAAU,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,2BAA2B;AAEvD,SAASC,OAAO,EAAEC,UAAU,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,gBAAgB;AACrE,OAAO,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAErB,MAAMC,aAAa,GAAG;EACpBC,UAAU,EAAE,CACV;IACEC,IAAI,EAAE,CAAC,+BAA+B,EAAE,+BAA+B;EACzE,CAAC,CACF;EACDC,oBAAoB,EAAE;AACxB,CAAC;AACD,MAAMC,MAAM,GAAGlB,EAAE,CAAC,uBAAuB,EAAE;EAAEmB,UAAU,EAAE,CAAC,WAAW;AAAE,CAAC,CAAC;AAEzE,IAAIC,EAAE;AACN,IAAIC,WAAW;AACf,IAAIC,WAAW;AACf,IAAIC,YAAY;AAChB,IAAIC,aAAa;AACjB,IAAIC,WAAW;AACf,IAAIC,UAAU;AACdR,MAAM,CAACS,EAAE,CAAC,SAAS,EAAGC,CAAC,IAAK;EAC1B,IAAI,CAACP,WAAW,EAAE;IAChBQ,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5B;EACF;EACA,QAAQF,CAAC,CAACG,IAAI;IACZ,KAAK,OAAO;MACVC,WAAW,CAACJ,CAAC,CAAC;MACd;IACF,KAAK,QAAQ;MACXK,YAAY,CAACL,CAAC,CAAC;MACf;IACF,KAAK,WAAW;MACdM,eAAe,CAACN,CAAC,CAAC;MAClB;IACF,KAAK,OAAO;MACV;MACA,IAAIR,EAAE,EAAE;QACNS,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;QACxC;MACF;MACAK,QAAQ,CAAC,CAAC;MACV;IACF,KAAK,KAAK;MACR,IAAIf,EAAE,EAAE;QACNgB,MAAM,CAAC,CAAC;MACV;MACA;IACF;MACEP,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEF,CAAC,CAAC;MAC3B;EACJ;AACF,CAAC,CAAC;AAEF,eAAeO,QAAQA,CAAA,EAAG;EACxB,IAAI;IACFf,EAAE,GAAG,IAAIiB,iBAAiB,CAACvB,aAAa,CAAC;IACzCM,EAAE,CAACkB,cAAc,GAAIV,CAAC,IAAK;MACzB,MAAMW,OAAO,GAAG;QACdR,IAAI,EAAE,WAAW;QACjBS,SAAS,EAAE;MACb,CAAC;MACD,IAAIZ,CAAC,CAACY,SAAS,EAAE;QACfD,OAAO,CAACC,SAAS,GAAGZ,CAAC,CAACY,SAAS,CAACA,SAAS;QACzCD,OAAO,CAACE,MAAM,GAAGb,CAAC,CAACY,SAAS,CAACC,MAAM;QACnCF,OAAO,CAACG,aAAa,GAAGd,CAAC,CAACY,SAAS,CAACE,aAAa;MACnD;MACAxB,MAAM,CAACyB,IAAI,CAAC,SAAS,EAAEJ,OAAO,CAAC;IACjC,CAAC;IACDnB,EAAE,CAACwB,OAAO,GAAIhB,CAAC,IAAMH,WAAW,CAACoB,OAAO,CAACC,SAAS,GAAGlB,CAAC,CAACmB,OAAO,CAAC,CAAC,CAAE;IAClE1B,WAAW,CAAC2B,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAK9B,EAAE,CAAC+B,QAAQ,CAACD,KAAK,EAAE7B,WAAW,CAAC,CAAC;IAC3E,MAAM+B,KAAK,GAAG,MAAMhC,EAAE,CAACiC,WAAW,CAAC,CAAC;IACpCnC,MAAM,CAACyB,IAAI,CAAC,SAAS,EAAE;MAAEZ,IAAI,EAAE,OAAO;MAAEuB,GAAG,EAAEF,KAAK,CAACE;IAAI,CAAC,CAAC;IACzD,MAAMlC,EAAE,CAACmC,mBAAmB,CAACH,KAAK,CAAC;EACrC,CAAC,CAAC,OAAOxB,CAAC,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;EAChB;AACF;AAEA,eAAeI,WAAWA,CAACoB,KAAK,EAAE;EAChC,IAAIhC,EAAE,EAAE;IACNS,OAAO,CAAC2B,KAAK,CAAC,yBAAyB,CAAC;IACxC;EACF;EACA,IAAI;IACFpC,EAAE,GAAG,IAAIiB,iBAAiB,CAACvB,aAAa,CAAC;IACzCM,EAAE,CAACkB,cAAc,GAAIV,CAAC,IAAK;MACzB,MAAMW,OAAO,GAAG;QACdR,IAAI,EAAE,WAAW;QACjBS,SAAS,EAAE;MACb,CAAC;MACD,IAAIZ,CAAC,CAACY,SAAS,EAAE;QACfD,OAAO,CAACC,SAAS,GAAGZ,CAAC,CAACY,SAAS,CAACA,SAAS;QACzCD,OAAO,CAACE,MAAM,GAAGb,CAAC,CAACY,SAAS,CAACC,MAAM;QACnCF,OAAO,CAACG,aAAa,GAAGd,CAAC,CAACY,SAAS,CAACE,aAAa;MACnD;MACAxB,MAAM,CAACyB,IAAI,CAAC,SAAS,EAAEJ,OAAO,CAAC;IACjC,CAAC;IACDnB,EAAE,CAACwB,OAAO,GAAIhB,CAAC,IAAMH,WAAW,CAACoB,OAAO,CAACC,SAAS,GAAGlB,CAAC,CAACmB,OAAO,CAAC,CAAC,CAAE;IAClE1B,WAAW,CAAC2B,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAK9B,EAAE,CAAC+B,QAAQ,CAACD,KAAK,EAAE7B,WAAW,CAAC,CAAC;IAC3E,MAAMD,EAAE,CAACqC,oBAAoB,CAACL,KAAK,CAAC;IAEpC,MAAMM,MAAM,GAAG,MAAMtC,EAAE,CAACuC,YAAY,CAAC,CAAC;IACtCzC,MAAM,CAACyB,IAAI,CAAC,SAAS,EAAE;MAAEZ,IAAI,EAAE,QAAQ;MAAEuB,GAAG,EAAEI,MAAM,CAACJ;IAAI,CAAC,CAAC;IAC3D,MAAMlC,EAAE,CAACmC,mBAAmB,CAACG,MAAM,CAAC;EACtC,CAAC,CAAC,OAAO9B,CAAC,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;EAChB;AACF;AAEA,eAAeK,YAAYA,CAACyB,MAAM,EAAE;EAClC,IAAI,CAACtC,EAAE,EAAE;IACPS,OAAO,CAAC2B,KAAK,CAAC,mBAAmB,CAAC;IAClC;EACF;EACA,IAAI;IACF,MAAMpC,EAAE,CAACqC,oBAAoB,CAACC,MAAM,CAAC;EACvC,CAAC,CAAC,OAAO9B,CAAC,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;EAChB;AACF;AAEA,eAAeM,eAAeA,CAACM,SAAS,EAAE;EACxC,IAAI;IACF,IAAI,CAACpB,EAAE,EAAE;MACPS,OAAO,CAAC2B,KAAK,CAAC,mBAAmB,CAAC;MAClC;IACF;IACA,IAAI,CAAChB,SAAS,EAAE;MACd,MAAMpB,EAAE,CAACwC,eAAe,CAAC,IAAI,CAAC;IAChC,CAAC,MAAM;MACL,MAAMxC,EAAE,CAACwC,eAAe,CAACpB,SAAS,CAAC;IACrC;EACF,CAAC,CAAC,OAAOZ,CAAC,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;EAChB;AACF;AACA,eAAeQ,MAAMA,CAAA,EAAG;EACtB,IAAIhB,EAAE,EAAE;IACNA,EAAE,CAACyC,KAAK,CAAC,CAAC;IACVzC,EAAE,GAAG,IAAI;EACX;EACAC,WAAW,CAAC2B,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAACY,IAAI,CAAC,CAAC,CAAC;EACxDzC,WAAW,GAAG,IAAI;EAClBC,WAAW,CAACuB,OAAO,CAACkB,QAAQ,GAAG,KAAK;EACpCxC,YAAY,CAACsB,OAAO,CAACkB,QAAQ,GAAG,IAAI;EACpCvC,aAAa,CAACqB,OAAO,CAACkB,QAAQ,GAAG,IAAI;AACvC;AAEA,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb3C,WAAW,GAAGrB,MAAM,CAAC,IAAI,CAAC;EAC1BsB,YAAY,GAAGtB,MAAM,CAAC,IAAI,CAAC;EAC3BuB,aAAa,GAAGvB,MAAM,CAAC,IAAI,CAAC;EAC5ByB,UAAU,GAAGzB,MAAM,CAAC,IAAI,CAAC;EACzBwB,WAAW,GAAGxB,MAAM,CAAC,IAAI,CAAC;EAC1B,MAAM;IAAEiE;EAAK,CAAC,GAAG9D,UAAU,CAACC,WAAW,CAAC;EACxCH,SAAS,CAAC,MAAM;IACdqB,YAAY,CAACsB,OAAO,CAACkB,QAAQ,GAAG,IAAI;IACpCvC,aAAa,CAACqB,OAAO,CAACkB,QAAQ,GAAG,IAAI;EACvC,CAAC,EAAE,EAAE,CAAC;EACN,MAAM,CAACI,UAAU,EAAEC,QAAQ,CAAC,GAAGjE,QAAQ,CAAC,KAAK,CAAC;EAE9C,MAAMkE,MAAM,GAAG,MAAAA,CAAA,KAAY;IACzB,IAAI;MACFhD,WAAW,GAAG,MAAMiD,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;QACtDC,KAAK,EAAE,IAAI;QACXC,KAAK,EAAE;UAAEC,gBAAgB,EAAE;QAAK;MAClC,CAAC,CAAC;MACFjD,UAAU,CAACmB,OAAO,CAACC,SAAS,GAAGzB,WAAW;IAC5C,CAAC,CAAC,OAAOuD,GAAG,EAAE;MACZ/C,OAAO,CAACC,GAAG,CAAC8C,GAAG,CAAC;IAClB;IAEAtD,WAAW,CAACuB,OAAO,CAACkB,QAAQ,GAAG,IAAI;IACnCxC,YAAY,CAACsB,OAAO,CAACkB,QAAQ,GAAG,KAAK;IACrCvC,aAAa,CAACqB,OAAO,CAACkB,QAAQ,GAAG,KAAK;IAEtC7C,MAAM,CAACyB,IAAI,CAAC,SAAS,EAAE;MAAEZ,IAAI,EAAE;IAAQ,CAAC,CAAC;EAC3C,CAAC;EAED,MAAM8C,KAAK,GAAG,MAAAA,CAAA,KAAY;IACxBzC,MAAM,CAAC,CAAC;IACRlB,MAAM,CAACyB,IAAI,CAAC,SAAS,EAAE;MAAEZ,IAAI,EAAE;IAAM,CAAC,CAAC;EACzC,CAAC;EAED,SAAS+C,SAASA,CAAA,EAAG;IACnB,IAAIX,UAAU,EAAE;MACdzC,UAAU,CAACmB,OAAO,CAACkC,KAAK,GAAG,IAAI;MAC/BX,QAAQ,CAAC,KAAK,CAAC;IACjB,CAAC,MAAM;MACL1C,UAAU,CAACmB,OAAO,CAACkC,KAAK,GAAG,KAAK;MAChCX,QAAQ,CAAC,IAAI,CAAC;IAChB;EACF;EAEA,oBACEzD,OAAA,CAAAE,SAAA;IAAAmE,QAAA,eACErE,OAAA;MAAMsE,SAAS,EAAC,YAAY;MAAAD,QAAA,gBAC1BrE,OAAA;QAAKsE,SAAS,EAAC,iBAAiB;QAAAD,QAAA,gBAC9BrE,OAAA;UAAKsE,SAAS,EAAC,oBAAoB;UAAAD,QAAA,eACjCrE,OAAA;YACEuE,GAAG,EAAExD,UAAW;YAChBuD,SAAS,EAAC,YAAY;YACtBE,QAAQ;YACRC,WAAW;YACXC,GAAG,EAAC;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEN,CAAC,eACN9E,OAAA;UAAKsE,SAAS,EAAC,oBAAoB;UAAAD,QAAA,eACjCrE,OAAA;YACEuE,GAAG,EAAEzD,WAAY;YACjBwD,SAAS,EAAC,YAAY;YACtBE,QAAQ;YACRC,WAAW;YACXC,GAAG,EAAC;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEN9E,OAAA;QAAKsE,SAAS,EAAC,eAAe;QAAAD,QAAA,gBAC5BrE,OAAA;UAAQsE,SAAS,EAAC,oBAAoB;UAACC,GAAG,EAAE5D,WAAY;UAACoE,OAAO,EAAErB,MAAO;UAAAW,QAAA,eACvErE,OAAA,CAACL,OAAO;YAAAgF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eACT9E,OAAA;UAAQsE,SAAS,EAAC;QAAoB;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC,eAChD9E,OAAA;UAAQsE,SAAS,EAAC,kBAAkB;UAACC,GAAG,EAAE3D,YAAa;UAACmE,OAAO,EAAEb,KAAM;UAAAG,QAAA,eACrErE,OAAA,CAACJ,UAAU;YAAA+E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eACT9E,OAAA;UAAQsE,SAAS,EAAC,oBAAoB;UAACC,GAAG,EAAE1D,aAAc;UAACkE,OAAO,EAAEZ,SAAU;UAAAE,QAAA,EAC3Eb,UAAU,gBAAGxD,OAAA,CAACH,KAAK;YAAA8E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAG9E,OAAA,CAACF,QAAQ;YAAA6E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EAAC,gBACP,CAAC;AAEP;AAACxB,EAAA,CAvFQD,GAAG;AAAA2B,EAAA,GAAH3B,GAAG;AAyFZ,eAAeA,GAAG;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}